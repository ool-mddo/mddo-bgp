Tue Oct 31 06:09:46.097 UTC
Building configuration...
!! IOS XR Configuration 5.3.2
!! Last configuration change at Tue Oct 31 04:30:24 2023 by vrnetlab
!
hostname Edge-TK02
interface Loopback0
 ipv4 address 192.168.255.2 255.255.255.255
!
interface MgmtEth0/0/CPU0/0
 ipv4 address 10.0.0.15 255.255.255.0
 shutdown
!
interface GigabitEthernet0/0/0/0
 description to_SW-TK01_Ethernet4
 ipv4 address 192.168.1.2 255.255.255.0
!
interface GigabitEthernet0/0/0/1
 description to_shared_curcuit
!
interface GigabitEthernet0/0/0/1.100
 description to_PNI01-2
 ipv4 address 172.16.0.10 255.255.255.252
 encapsulation dot1q 100
!
interface GigabitEthernet0/0/0/1.200
 description to_PNI02-1
 ipv4 address 172.16.1.10 255.255.255.252
 encapsulation dot1q 200
!
interface GigabitEthernet0/0/0/2
 shutdown
!
interface GigabitEthernet0/0/0/3
 shutdown
!
interface GigabitEthernet0/0/0/4
 shutdown
!
interface GigabitEthernet0/0/0/5
 shutdown
!
interface GigabitEthernet0/0/0/6
 shutdown
!
interface GigabitEthernet0/0/0/7
 shutdown
!
interface GigabitEthernet0/0/0/8
 shutdown
!
interface GigabitEthernet0/0/0/9
 shutdown
!
interface GigabitEthernet0/0/0/10
 shutdown
!
interface GigabitEthernet0/0/0/11
 shutdown
!
interface GigabitEthernet0/0/0/12
 shutdown
!
interface GigabitEthernet0/0/0/13
 shutdown
!
interface GigabitEthernet0/0/0/14
 shutdown
!
interface GigabitEthernet0/0/0/15
 shutdown
!
interface GigabitEthernet0/0/0/16
 shutdown
!
interface GigabitEthernet0/0/0/17
 shutdown
!
interface GigabitEthernet0/0/0/18
 shutdown
!
interface GigabitEthernet0/0/0/19
 shutdown
!
interface GigabitEthernet0/0/0/20
 shutdown
!
interface GigabitEthernet0/0/0/21
 shutdown
!
interface GigabitEthernet0/0/0/22
 shutdown
!
interface GigabitEthernet0/0/0/23
 shutdown
!
interface GigabitEthernet0/0/0/24
 shutdown
!
interface GigabitEthernet0/0/0/25
 shutdown
!
interface GigabitEthernet0/0/0/26
 shutdown
!
interface GigabitEthernet0/0/0/27
 shutdown
!
interface GigabitEthernet0/0/0/28
 shutdown
!
interface GigabitEthernet0/0/0/29
 shutdown
!
interface GigabitEthernet0/0/0/30
 shutdown
!
interface GigabitEthernet0/0/0/31
 shutdown
!
interface GigabitEthernet0/0/0/32
 shutdown
!
interface GigabitEthernet0/0/0/33
 shutdown
!
interface GigabitEthernet0/0/0/34
 shutdown
!
interface GigabitEthernet0/0/0/35
 shutdown
!
interface GigabitEthernet0/0/0/36
 shutdown
!
interface GigabitEthernet0/0/0/37
 shutdown
!
interface GigabitEthernet0/0/0/38
 shutdown
!
interface GigabitEthernet0/0/0/39
 shutdown
!
interface GigabitEthernet0/0/0/40
 shutdown
!
interface GigabitEthernet0/0/0/41
 shutdown
!
interface GigabitEthernet0/0/0/42
 shutdown
!
interface GigabitEthernet0/0/0/43
 shutdown
!
interface GigabitEthernet0/0/0/44
 shutdown
!
interface GigabitEthernet0/0/0/45
 shutdown
!
interface GigabitEthernet0/0/0/46
 shutdown
!
interface GigabitEthernet0/0/0/47
 shutdown
!
interface GigabitEthernet0/0/0/48
 shutdown
!
interface GigabitEthernet0/0/0/49
 shutdown
!
interface GigabitEthernet0/0/0/50
 shutdown
!
interface GigabitEthernet0/0/0/51
 shutdown
!
interface GigabitEthernet0/0/0/52
 shutdown
!
interface GigabitEthernet0/0/0/53
 shutdown
!
interface GigabitEthernet0/0/0/54
 shutdown
!
interface GigabitEthernet0/0/0/55
 shutdown
!
interface GigabitEthernet0/0/0/56
 shutdown
!
interface GigabitEthernet0/0/0/57
 shutdown
!
interface GigabitEthernet0/0/0/58
 shutdown
!
interface GigabitEthernet0/0/0/59
 shutdown
!
interface GigabitEthernet0/0/0/60
 shutdown
!
interface GigabitEthernet0/0/0/61
 shutdown
!
interface GigabitEthernet0/0/0/62
 shutdown
!
interface GigabitEthernet0/0/0/63
 shutdown
!
interface GigabitEthernet0/0/0/64
 shutdown
!
interface GigabitEthernet0/0/0/65
 shutdown
!
interface GigabitEthernet0/0/0/66
 shutdown
!
interface GigabitEthernet0/0/0/67
 shutdown
!
interface GigabitEthernet0/0/0/68
 shutdown
!
interface GigabitEthernet0/0/0/69
 shutdown
!
interface GigabitEthernet0/0/0/70
 shutdown
!
interface GigabitEthernet0/0/0/71
 shutdown
!
interface GigabitEthernet0/0/0/72
 shutdown
!
interface GigabitEthernet0/0/0/73
 shutdown
!
interface GigabitEthernet0/0/0/74
 shutdown
!
interface GigabitEthernet0/0/0/75
 shutdown
!
interface GigabitEthernet0/0/0/76
 shutdown
!
interface GigabitEthernet0/0/0/77
 shutdown
!
interface GigabitEthernet0/0/0/78
 shutdown
!
interface GigabitEthernet0/0/0/79
 shutdown
!
interface GigabitEthernet0/0/0/80
 shutdown
!
interface GigabitEthernet0/0/0/81
 shutdown
!
interface GigabitEthernet0/0/0/82
 shutdown
!
interface GigabitEthernet0/0/0/83
 shutdown
!
interface GigabitEthernet0/0/0/84
 shutdown
!
interface GigabitEthernet0/0/0/85
 shutdown
!
interface GigabitEthernet0/0/0/86
 shutdown
!
interface GigabitEthernet0/0/0/87
 shutdown
!
interface GigabitEthernet0/0/0/88
 shutdown
!
interface GigabitEthernet0/0/0/89
 shutdown
!
interface GigabitEthernet0/0/0/90
 shutdown
!
interface GigabitEthernet0/0/0/91
 shutdown
!
interface GigabitEthernet0/0/0/92
 shutdown
!
interface GigabitEthernet0/0/0/93
 shutdown
!
interface GigabitEthernet0/0/0/94
 shutdown
!
interface GigabitEthernet0/0/0/95
 shutdown
!
interface GigabitEthernet0/0/0/96
 shutdown
!
interface GigabitEthernet0/0/0/97
 shutdown
!
interface GigabitEthernet0/0/0/98
 shutdown
!
interface GigabitEthernet0/0/0/99
 shutdown
!
interface GigabitEthernet0/0/0/100
 shutdown
!
interface GigabitEthernet0/0/0/101
 shutdown
!
interface GigabitEthernet0/0/0/102
 shutdown
!
interface GigabitEthernet0/0/0/103
 shutdown
!
interface GigabitEthernet0/0/0/104
 shutdown
!
interface GigabitEthernet0/0/0/105
 shutdown
!
interface GigabitEthernet0/0/0/106
 shutdown
!
interface GigabitEthernet0/0/0/107
 shutdown
!
interface GigabitEthernet0/0/0/108
 shutdown
!
interface GigabitEthernet0/0/0/109
 shutdown
!
interface GigabitEthernet0/0/0/110
 shutdown
!
interface GigabitEthernet0/0/0/111
 shutdown
!
interface GigabitEthernet0/0/0/112
 shutdown
!
interface GigabitEthernet0/0/0/113
 shutdown
!
interface GigabitEthernet0/0/0/114
 shutdown
!
interface GigabitEthernet0/0/0/115
 shutdown
!
interface GigabitEthernet0/0/0/116
 shutdown
!
interface GigabitEthernet0/0/0/117
 shutdown
!
interface GigabitEthernet0/0/0/118
 shutdown
!
interface GigabitEthernet0/0/0/119
 shutdown
!
interface GigabitEthernet0/0/0/120
 shutdown
!
interface GigabitEthernet0/0/0/121
 shutdown
!
interface GigabitEthernet0/0/0/122
 shutdown
!
interface GigabitEthernet0/0/0/123
 shutdown
!
interface GigabitEthernet0/0/0/124
 shutdown
!
interface GigabitEthernet0/0/0/125
 shutdown
!
interface GigabitEthernet0/0/0/126
 shutdown
!
interface GigabitEthernet0/0/0/127
 shutdown
!
prefix-set default-ipv4
  0.0.0.0/0
end-set
!
prefix-set longer24-ipv4
  0.0.0.0/0 ge 25
end-set
!
as-path-set any
  ios-regex '.*'
end-set
!
as-path-set as65550-origin
  ios-regex '^(65550_)+$'
end-set
!
as-path-set as65560-origin
  ios-regex '^(65560_)+$'
end-set
!
as-path-set aspath-longer200
  length ge 200
end-set
!
community-set any
  *:*
end-set
!
community-set poi
  65518:20
end-set
!
community-set peer
  65518:2
end-set
!
community-set aggregate
  65518:1
end-set
!
community-set as65518-any
  ios-regex '65518:.*'
end-set
!
route-policy POI-East_in
  set med 100
  set local-preference 300
  delete community in any
  set community poi
  done
end-policy
!
route-policy reject-in-ipv4
  if destination in longer24-ipv4 then
    drop
  endif
  if destination in default-ipv4 then
    drop
  endif
  if as-path in aspath-longer200 then
    drop
  endif
  pass
end-policy
!
route-policy reject-out-ipv4
  if destination in longer24-ipv4 then
    drop
  endif
  if destination in default-ipv4 then
    drop
  endif
  pass
end-policy
!
route-policy as65550-peer-in1-tyo-ipv4
  apply reject-in-ipv4
  if as-path in as65550-origin then
    set local-preference 300
    set med 100
    set community peer
    done
  endif
  if as-path in any then
    set local-preference 210
    set med 100
    set community peer
    done
  endif
  drop
end-policy
!
route-policy as65550-peer-out1-tyo-ipv4
  apply reject-out-ipv4
  if community matches-any aggregate then
    set med 100
    delete community in any
    done
  endif
  drop
end-policy
!
route-policy as65560-peer-in1-tyo-ipv4
  apply reject-in-ipv4
  if as-path in as65560-origin then
    set local-preference 300
    set med 100
    set community peer
    done
  endif
  if as-path in any then
    set local-preference 210
    set med 100
    set community peer
    done
  endif
  drop
end-policy
!
route-policy as65560-peer-out1-tyo-ipv4
  apply reject-out-ipv4
  if community matches-any aggregate then
    set med 100
    delete community in any
    done
  endif
  drop
end-policy
!
router static
 address-family ipv4 unicast
  172.31.255.1/32 Null0
 !
!
router ospf 65500
 area 0.0.0.10
  interface Loopback0
   cost 1
  !
  interface GigabitEthernet0/0/0/0
   cost 10
  !
 !
!
router bgp 65500
 bgp confederation identifier 65518
 bgp confederation peers 65500
 bgp router-id 192.168.255.2
 address-family ipv4 unicast
 !
 neighbor 172.16.0.9
  remote-as 65550
  timers 10 30
  description "AS65550_PNI1-2_ipv4"
  address-family ipv4 unicast
   send-community-ebgp
   route-policy as65550-peer-in1-tyo-ipv4 in
   route-policy as65550-peer-out1-tyo-ipv4 out
   next-hop-self
   remove-private-AS
   soft-reconfiguration inbound always
  !
 !
 neighbor 172.16.1.9
  remote-as 65560
  timers 10 30
  description "AS65560_PNI2-1_ipv4"
  address-family ipv4 unicast
   send-community-ebgp
   route-policy as65560-peer-in1-tyo-ipv4 in
   route-policy as65560-peer-out1-tyo-ipv4 out
   next-hop-self
   remove-private-AS
   soft-reconfiguration inbound always
  !
 !
 neighbor 192.168.255.101
  remote-as 65500
  password encrypted 0506020B2E
  description RR
  update-source Loopback0
  address-family ipv4 unicast
   next-hop-self
  !
 !
 neighbor 192.168.255.102
  remote-as 65500
  password encrypted 0506020B2E
  description RR
  update-source Loopback0
  address-family ipv4 unicast
   next-hop-self
  !
 !
!
ssh server v2
ssh server netconf port 830
xml agent tty
!
netconf-yang agent
 ssh
!
end
